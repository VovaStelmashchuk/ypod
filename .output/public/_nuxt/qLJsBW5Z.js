import{_ as a}from"./DfH7CL4k.js";import{_ as e,a as l}from"./CcLVj9_o.js";import{x as o,h as t,s,a as r,d as i,j as d,u as n,b as c,e as u,F as p,k as m,o as f,c as g,w as y,_ as h}from"./BWI5sAI2.js";import{u as b}from"./D4WPCdkm.js";const v={class:"p-5 text-center text-4xl font-bold text-gray-900"},x={class:"my-4 p-4 border border-gray-300 rounded-lg bg-gray-50"},w={class:"flex items-center gap-3"},$={key:0,class:"w-4 h-4"},k={class:"flex flex-row items-center gap-2"},S={key:0,class:"w-4 h-4"},_={key:1,class:"w-4 h-4"},P={class:"grid grid-cols-[repeat(auto-fit,minmax(300px,1fr))] gap-8"},j=["src"],C={class:"mt-2 font-medium text-gray-900"},F={__name:"index",async setup(F){let O,D;const T=o().params.show,{data:E}=([O,D]=t((()=>b(`/api/dashboard/${T}/episodes`,"$MIFOtQuBvS"))),O=await O,D(),O),I=s(!1),L=s(!1),R=s(!1),U=s(null),B=async a=>{const e=a.target.files[0];if(!e)return;L.value=!0;const l=new FormData;l.append("logo",e);try{await $fetch(`/api/dashboard/${T}/logo`,{method:"POST",body:l}),window.location.reload()}catch(o){console.error("Error uploading logo:",o),alert("Failed to upload logo. Please try again.")}finally{L.value=!1,U.value&&(U.value.value="")}},M=async()=>{I.value=!0,await b(`/api/dashboard/${T}/sync`,{method:"POST"},"$DDcv21LZCy"),I.value=!1},N=async()=>{R.value=!0;try{await $fetch(`/api/dashboard/${T}/rss-update`,{method:"POST"})}catch(a){console.error("Error updating RSS:",a)}finally{R.value=!1}};return(o,t)=>{const s=a,b=e,F=h;return f(),r(p,null,[i("div",null,[i("h1",v,d(n(E).showName),1)]),i("div",x,[t[0]||(t[0]=i("label",{for:"logo-upload",class:"block mb-2 font-semibold text-sm text-gray-900"},"Upload Podcast Logo",-1)),i("div",w,[i("input",{id:"logo-upload",type:"file",accept:"image/*",onChange:B,ref_key:"logoInput",ref:U,class:"p-2 border border-gray-300 rounded bg-white cursor-pointer text-sm text-gray-900 file:py-1.5 file:px-3 file:border-0 file:rounded file:bg-blue-500 file:text-white file:cursor-pointer file:mr-2 hover:file:bg-blue-600"},null,544),n(L)?(f(),r("div",$,[u(s)])):c("",!0)])]),i("div",k,[u(b,{theme:n(l).primary,label:"Sync with youtube playlist",class:"my-2",onClick:M},null,8,["theme"]),n(I)?(f(),r("div",S,[u(s)])):c("",!0),u(b,{theme:n(l).primary,label:"Update RSS",class:"my-2",onClick:N},null,8,["theme"]),n(R)?(f(),r("div",_,[u(s)])):c("",!0)]),i("div",P,[(f(!0),r(p,null,m(n(E).episodes,(a=>(f(),g(F,{to:`/dashboard/${n(T)}/${a.slug}`,class:"block no-underline text-inherit transition-all duration-200 ease-in-out cursor-pointer hover:-translate-y-1 hover:opacity-90"},{default:y((()=>[i("img",{src:a.image,alt:"Podcast logo",class:"w-full h-auto m-0 rounded-2xl"},null,8,j),i("p",C,d(a.title),1)])),_:2},1032,["to"])))),256))])],64)}}};export{F as default};
