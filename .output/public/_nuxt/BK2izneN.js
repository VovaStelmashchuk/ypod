import{x as e,v as a,h as s,s as l,a as t,d as o,e as i,w as d,u as r,j as p,b as c,y as n,_ as u,o as x,z as m}from"./BWI5sAI2.js";import{_ as g,a as b}from"./CcLVj9_o.js";import{_ as y}from"./DfH7CL4k.js";import{u as f}from"./D4WPCdkm.js";const h={class:"max-w-6xl mx-auto p-5"},v={class:"mb-8"},w={class:"text-4xl font-bold m-0 text-gray-900"},A={class:"flex flex-col gap-8"},k={class:"bg-gray-100/50 p-6 rounded-xl"},S={class:"grid grid-cols-[repeat(auto-fit,minmax(250px,1fr))] gap-4"},$={class:"flex flex-col gap-1"},U={class:"text-base text-gray-900"},_={class:"flex flex-col gap-1"},T={class:"text-base text-gray-900"},j={class:"flex flex-col gap-1"},D={key:0,class:"flex flex-col gap-1"},I={class:"text-base text-gray-900"},N={class:"bg-gray-100/50 p-6 rounded-xl"},P=["src","alt"],V={key:0,class:"bg-gray-100/50 p-6 rounded-xl"},C={class:"relative pb-[56.25%] pt-6 h-0 max-w-4xl"},E=["src","title"],F={class:"bg-gray-100/50 p-6 rounded-xl"},B={class:"leading-relaxed whitespace-pre-wrap text-gray-900"},z={class:"bg-gray-100/50 p-6 rounded-xl"},L={class:"leading-relaxed whitespace-pre-wrap text-gray-900"},O={key:1,class:"bg-gray-100/50 p-6 rounded-xl"},R=["src"],Y={class:"bg-gray-100/50 p-6 rounded-xl"},Z={class:"flex flex-col gap-3 items-start"},q={key:0,class:"w-4 h-4"},G={__name:"[episodeSlug]",async setup(G){let H,J;const K=e(),M=K.params.show,Q=K.params.episodeSlug;a((async()=>{console.log("Episode details page mounted"),console.log("Show:",M),console.log("Episode:",Q)}));const{data:W}=([H,J]=s((()=>f(`/api/dashboard/${M}/${Q}`,"$BVnoTZ8TRU"))),H=await H,J(),H),X=l(null),ee=l(null),ae=l(!1),se=l(""),le=l(!1),te=e=>{X.value=e.target.files[0],se.value=""},oe=async()=>{if(X.value){ae.value=!0,se.value="";try{const e=new FormData;e.append("audio",X.value);await $fetch(`/api/dashboard/${M}/${Q}/upload`,{method:"POST",body:e});se.value="Audio uploaded successfully!",le.value=!0,setTimeout((()=>{window.location.reload()}),1e3)}catch(e){se.value="Failed to upload audio. Please try again.",le.value=!1}finally{ae.value=!1}}};return(e,a)=>{const s=u,l=g,f=y;return x(),t("div",h,[o("div",v,[i(s,{to:`/dashboard/${r(W).showSlug}`,class:"inline-block mb-4 text-blue-500 no-underline text-sm hover:underline"},{default:d((()=>[m(" ← Back to "+p(r(W).showName),1)])),_:1},8,["to"]),o("h1",w,p(r(W).episode.title),1)]),o("div",A,[o("div",k,[a[4]||(a[4]=o("h2",{class:"mt-0 mb-4 text-xl font-semibold text-gray-900"},"Episode Information",-1)),o("div",S,[o("div",$,[a[0]||(a[0]=o("span",{class:"text-xs uppercase opacity-70 font-semibold text-gray-900"},"Slug:",-1)),o("span",U,p(r(W).episode.slug),1)]),o("div",_,[a[1]||(a[1]=o("span",{class:"text-xs uppercase opacity-70 font-semibold text-gray-900"},"Position:",-1)),o("span",T,p(r(W).episode.position),1)]),o("div",j,[a[2]||(a[2]=o("span",{class:"text-xs uppercase opacity-70 font-semibold text-gray-900"},"Audio Status:",-1)),o("span",{class:n(["text-base",{"text-green-500":r(W).episode.hasAudio,"text-yellow-500":!r(W).episode.hasAudio}])},p(r(W).episode.hasAudio?"✓ Uploaded":"⚠ Not Uploaded"),3)]),r(W).episode.createdAt?(x(),t("div",D,[a[3]||(a[3]=o("span",{class:"text-xs uppercase opacity-70 font-semibold text-gray-900"},"Created:",-1)),o("span",I,p(new Date(r(W).episode.createdAt).toLocaleString()),1)])):c("",!0)])]),o("div",N,[a[5]||(a[5]=o("h2",{class:"mt-0 mb-4 text-xl font-semibold text-gray-900"},"Thumbnail",-1)),o("img",{src:r(W).episode.image,alt:r(W).episode.title,class:"w-full max-w-md h-auto rounded-lg"},null,8,P)]),r(W).episode.youtubeVideoId?(x(),t("div",V,[a[6]||(a[6]=o("h2",{class:"mt-0 mb-4 text-xl font-semibold text-gray-900"},"YouTube Video",-1)),o("div",C,[o("iframe",{src:`https://www.youtube.com/embed/${r(W).episode.youtubeVideoId}`,title:r(W).episode.title,frameborder:"0",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share",referrerpolicy:"strict-origin-when-cross-origin",allowfullscreen:"",class:"absolute top-0 left-0 w-full h-full"},null,8,E)])])):c("",!0),o("div",F,[a[7]||(a[7]=o("h2",{class:"mt-0 mb-4 text-xl font-semibold text-gray-900"},"Short Description",-1)),o("p",B,p(r(W).episode.shortDescription||"No short description available"),1)]),o("div",z,[a[8]||(a[8]=o("h2",{class:"mt-0 mb-4 text-xl font-semibold text-gray-900"},"Full Description",-1)),o("p",L,p(r(W).episode.description||"No description available"),1)]),r(W).episode.hasAudio?(x(),t("div",O,[a[9]||(a[9]=o("h2",{class:"mt-0 mb-4 text-xl font-semibold text-gray-900"},"Audio Player",-1)),o("audio",{controls:"",src:r(W).episode.audioUrl,class:"w-full max-w-2xl"},null,8,R)])):c("",!0),o("div",Y,[a[10]||(a[10]=o("h2",{class:"mt-0 mb-4 text-xl font-semibold text-gray-900"},"Upload Audio",-1)),o("div",Z,[o("input",{type:"file",accept:"audio/mp3,audio/mpeg",onChange:te,ref_key:"fileInput",ref:ee,class:"p-2 border border-gray-300 rounded bg-gray-50 text-gray-900"},null,544),i(l,{theme:r(b).primary,label:r(ae)?"Uploading...":"Upload Audio",onClick:oe,disabled:!r(X)||r(ae),class:"min-w-[150px]"},null,8,["theme","label","disabled"]),r(ae)?(x(),t("div",q,[i(f)])):c("",!0),r(se)?(x(),t("p",{key:1,class:n({"text-green-500":r(le),"text-red-500":!r(le)})},p(r(se)),3)):c("",!0)])])])])}}};export{G as default};
